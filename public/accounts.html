<script>
  async function fetchAccounts() {
    const res = await fetch('/pip/accounts');
    const data = await res.json();
    document.getElementById('account-list').innerHTML = data.map(acc => 
      `<li>
        ID: ${acc.id}, UserID: ${acc.user_id}, Balance: ${acc.balance}
        <button onclick="deleteAccount(${acc.id})">Delete</button>
      </li>`
    ).join('');
  }

  async function createAccount() {
    const user_id = document.getElementById('user_id').value;
    const balance = document.getElementById('balance').value;
    await fetch('/pip/accounts', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ user_id, balance })
    });
    fetchAccounts();
  }

  async function deleteAccount(id) {
    await fetch(`/pip/accounts/${id}`, { method: 'DELETE' });
    fetchAccounts();
  }

  window.onload = fetchAccounts;
</script>
